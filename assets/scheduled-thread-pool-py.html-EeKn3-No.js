import{_ as o}from"./plugin-vue_export-helper-DlAUqK2U.js";import{a as l,h as i,b as a,g as t,e as n,f as r,r as h,o as d}from"./app-dowPD55j.js";const c={};function p(u,e){const s=h("RouteLink");return d(),l("div",null,[e[7]||(e[7]=i('<p>Python lacks a built-in equivalent to Java’s ScheduledThreadPoolExecutor for scheduling tasks to run after a delay or at fixed intervals. This article explains about the implementation of ScheduledThreadPoolExecutor in python with similar Java APIs.</p><h2 id="thread-pool" tabindex="-1"><a class="header-anchor" href="#thread-pool"><span>Thread Pool</span></a></h2><p>A thread pool is a design pattern in which multiple threads are maintained to perform the tasks submitted to it. Thread pools are used where multiple short-lived tasks need to be executed and also to increase the performance of the application.</p><h3 id="benefits-of-using-thread-pool" tabindex="-1"><a class="header-anchor" href="#benefits-of-using-thread-pool"><span>Benefits of using Thread Pool</span></a></h3><p>Instead of maintaining a thread pool, we can also create a thread for each task as needed. The main benefit of using a thread pool is that we avoid the cost of creating and destroying the threads. From Wikipedia,</p><blockquote><ol><li>Creating too many threads wastes resources and costs time creating the unused threads.</li><li>Destroying too many threads requires more time later when creating them again.</li><li>Creating threads too slowly might result in poor client performance (long wait times).</li><li>Destroying threads too slowly may starve other processes of resources.</li></ol></blockquote><h2 id="threadpoolexecutor" tabindex="-1"><a class="header-anchor" href="#threadpoolexecutor"><span>ThreadPoolExecutor</span></a></h2><p>A ThreadPoolExecutor is a kind of supervisor program using which the tasks are submitted to the thread pool. Each programming language has some kind of concurrency package where the thread pool executors are provided. For example, concurrency is provided by the <code>java.util.concurrent</code> package, whereas in Python, it’s provided by the <code>concurrent.futures</code> package.</p><p>When a task is submitted to a thread pool executor, a thread is assigned to execute the task and return the result. The number of threads in a thread pool is decided by the computational resource available in a computer.</p><h2 id="scheduledthreadpoolexecutor" tabindex="-1"><a class="header-anchor" href="#scheduledthreadpoolexecutor"><span>ScheduledThreadPoolExecutor</span></a></h2><p>ScheduledThreadPoolExecutor is an executor service where the submitted tasks are executed with an initial delay and a periodic interval repeatedly.</p><p>ScheduledThreadPoolExecutor comes in handy when we need to run a particular task repeatedly at a specific interval. Example: Checking the replication of a component every 10 minutes and triggering a mail if there is slowness or failure.</p>',12)),a("p",null,[e[1]||(e[1]=t("The implementation of a ScheduledThreadPoolExecutor is simply done by extending the ")),e[2]||(e[2]=a("code",null,"ThreadPoolExecutor",-1)),e[3]||(e[3]=t(" and by maintaining a ")),n(s,{to:"/blog/delay-queue-py.html"},{default:r(()=>e[0]||(e[0]=[t("delay queue")])),_:1}),e[4]||(e[4]=t(" to provide the tasks based on the interval. Most languages provide the ")),e[5]||(e[5]=a("a",{href:"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html",target:"_blank",rel:"noopener noreferrer"},"ScheduledThreadPoolExecutor",-1)),e[6]||(e[6]=t(" as a part of their concurrency package. Java provides the ScheduledThreadPoolExecutor in its concurrency package by default. Java provides two methods to execute the task periodically."))]),e[8]||(e[8]=i(`<ol><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleAtFixedRate-java.lang.Runnable-long-long-java.util.concurrent.TimeUnit-" target="_blank" rel="noopener noreferrer">scheduleAtFixedRate</a> — Creates and executes a periodic action that becomes enabled first after the given initial delay, and subsequently with the given period; that is executions will commence after <code>initialDelay</code> then <code>initialDelay+period</code>, then <code>initialDelay + 2 \\* period</code>, and so on.</li><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleWithFixedDelay-java.lang.Runnable-long-long-java.util.concurrent.TimeUnit-" target="_blank" rel="noopener noreferrer">scheduleWithFixedDelay</a> — Creates and executes a periodic action that becomes enabled first after the given initial delay, and subsequently with the given delay between the termination of one execution and the commencement of the next.</li></ol><h3 id="scheduledthreadpoolexecutor-in-python" tabindex="-1"><a class="header-anchor" href="#scheduledthreadpoolexecutor-in-python"><span>ScheduledThreadPoolExecutor in Python</span></a></h3><p>Python provides two different modules, <code>sched</code> and <code>concurrent.futures</code> and it is in the hands of the user to implement the ScheduledThreadPoolExecutor. Though there are packages that provide scheduling in Python, there is no implementation as close to the one provided by Java. So, I’ve implemented the same with the APIs to closely resemble the ones in Java.</p><p>The Python package for ScheduledThreadPoolExecutor is published in <a href="https://pypi.org/project/scheduled-thread-pool-executor/" target="_blank" rel="noopener noreferrer">PyPI</a> as well. You can install it using <code>pip install scheduled-thread-pool-executor</code> . It provides the three main methods <code>schedule, schedule_at_fixed_rate, schedule_at_fixed_delay</code> similar to the one in Java. I believe this will be useful for many who are in search of such implementations in the future.</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" data-title="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">Usage</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> scheduled_thread_pool_executor </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ScheduledThreadPoolExecutor</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">scheduled_executor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;"> ScheduledThreadPoolExecutor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">max_workers</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">scheduled_executor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">schedule</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># equals to schedule once, where task is a callable</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">scheduled_executor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">schedule_at_fixed_rate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># schedule immediately and run periodically for every 5 secs</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">scheduled_executor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">schedule_at_fixed_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(task, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># schedule after 5secs (initial delay) and run periodically for every 10secs</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Thank you for reading! See you in the next post.</p>`,6))])}const m=o(c,[["render",p],["__file","scheduled-thread-pool-py.html.vue"]]),g=JSON.parse('{"path":"/blog/scheduled-thread-pool-py.html","title":"ScheduledThreadPoolExecutor in Python","lang":"en-US","frontmatter":{"date":"2022-06-19T00:00:00.000Z","lang":"en-US","title":"ScheduledThreadPoolExecutor in Python","description":"ScheduledThreadPoolExecutor implementation in python","category":["python"],"tag":["thread","threadpool","schedulers"],"head":[["meta",{"name":"keywords","content":"python threadpool executor threadpoolexecutor scheduler"}],["meta",{"property":"og:url","content":"https://syogaraj.github.io/blog/scheduled-thread-pool-py.html"}],["meta",{"property":"og:site_name","content":"Yogaraj.S"}],["meta",{"property":"og:title","content":"ScheduledThreadPoolExecutor in Python"}],["meta",{"property":"og:description","content":"ScheduledThreadPoolExecutor implementation in python"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2025-02-02T10:20:18.000Z"}],["meta",{"property":"article:tag","content":"thread"}],["meta",{"property":"article:tag","content":"threadpool"}],["meta",{"property":"article:tag","content":"schedulers"}],["meta",{"property":"article:published_time","content":"2022-06-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-02-02T10:20:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ScheduledThreadPoolExecutor in Python\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-06-19T00:00:00.000Z\\",\\"dateModified\\":\\"2025-02-02T10:20:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Yogaraj. S\\",\\"email\\":\\"yogarajsivaprakasam@gmail.com\\"}]}"]]},"headers":[{"level":2,"title":"Thread Pool","slug":"thread-pool","link":"#thread-pool","children":[{"level":3,"title":"Benefits of using Thread Pool","slug":"benefits-of-using-thread-pool","link":"#benefits-of-using-thread-pool","children":[]}]},{"level":2,"title":"ThreadPoolExecutor","slug":"threadpoolexecutor","link":"#threadpoolexecutor","children":[]},{"level":2,"title":"ScheduledThreadPoolExecutor","slug":"scheduledthreadpoolexecutor","link":"#scheduledthreadpoolexecutor","children":[{"level":3,"title":"ScheduledThreadPoolExecutor in Python","slug":"scheduledthreadpoolexecutor-in-python","link":"#scheduledthreadpoolexecutor-in-python","children":[]}]}],"git":{"createdTime":1737820319000,"updatedTime":1738491618000,"contributors":[{"name":"yogaraj.s","username":"yogaraj.s","email":"yogarajsivaprakasam@gmail.com","commits":4,"url":"https://github.com/yogaraj.s"}]},"readingTime":{"minutes":2.31,"words":694},"filePathRelative":"blog/scheduled-thread-pool-py.md","localizedDate":"June 19, 2022","excerpt":"<p>Python lacks a built-in equivalent to Java’s ScheduledThreadPoolExecutor for scheduling tasks to run after a delay or at fixed intervals. This article explains about the implementation of ScheduledThreadPoolExecutor in python with similar Java APIs.</p>"}');export{m as comp,g as data};
